.run_test_pipeline:
  stage: run_test_pipelines
  needs:
    - job: pipeline_variables
    - job: build_linux_arm64_test
    - job: build_linux_armhf_test
  variables:
    PARENT_PIPELINE_ID: $CI_PIPELINE_ID
    TRIGGERED_BY_GDB_PIPELINE_BRANCH: $TRIGGERED_BY_GDB_PIPELINE_BRANCH
    SCHEDULE_TYPE: $SCHEDULE_TYPE
    CI_FULL_RUN: $CI_FULL_RUN

5.2.x_run_test_pipeline:
  extends: .run_test_pipeline
  trigger:
    include:
      - local: '.gitlab/ci/downstream/child-pipeline-template.yml'
      - local: '.gitlab/ci/downstream/idf_5_2_x/build.yml'
      - local: '.gitlab/ci/downstream/idf_5_2_x/test.yml'
    strategy: depend
  variables:
    CI_IDF_VERSION: "5_2"

5.3.x_run_test_pipeline:
  extends: .run_test_pipeline
  trigger:
    include:
      - local: '.gitlab/ci/downstream/child-pipeline-template.yml'
      - local: '.gitlab/ci/downstream/idf_5_3_x/build.yml'
      - local: '.gitlab/ci/downstream/idf_5_3_x/test.yml'
    strategy: depend
  variables:
    CI_IDF_VERSION: "5_3"

5.4.x_run_test_pipeline:
  extends: .run_test_pipeline
  trigger:
    include:
      - local: '.gitlab/ci/downstream/child-pipeline-template.yml'
      - local: '.gitlab/ci/downstream/idf_5_4_x/build.yml'
      - local: '.gitlab/ci/downstream/idf_5_4_x/test.yml'
    strategy: depend
  variables:
    CI_IDF_VERSION: "5_4"

5.5.x_run_test_pipeline:
  extends: .run_test_pipeline
  trigger:
    include:
      - local: '.gitlab/ci/downstream/child-pipeline-template.yml'
      - local: '.gitlab/ci/downstream/idf_5_5_x/build.yml'
      - local: '.gitlab/ci/downstream/idf_5_5_x/test.yml'
    strategy: depend
  variables:
    CI_IDF_VERSION: "5_5"

6.0.x_run_test_pipeline:
  extends: .run_test_pipeline
  trigger:
    include:
      - local: '.gitlab/ci/downstream/child-pipeline-template.yml'
      - local: '.gitlab/ci/downstream/idf_6_0_x/build.yml'
      - local: '.gitlab/ci/downstream/idf_6_0_x/test.yml'
    strategy: depend
  variables:
    CI_IDF_VERSION: "6_0"

master_run_test_pipeline:
  extends: .run_test_pipeline
  trigger:
    include:
      - local: '.gitlab/ci/downstream/child-pipeline-template.yml'
      - local: '.gitlab/ci/downstream/idf_master/build.yml'
      - local: '.gitlab/ci/downstream/idf_master/test.yml'
    strategy: depend
  variables:
    CI_IDF_VERSION: "6_1"
